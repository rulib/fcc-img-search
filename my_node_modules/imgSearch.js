//mongo stuff
var mongo = require('mongodb').MongoClient;
var mongoUrl = 'mongodb://'+process.env.IP+':27017/searchlog';
var assert = require('assert');
var ObjectId = require('mongodb').ObjectID;
var searchCollection = 'searches';

var imgur = require('../private/secret.js');


var request = require('request');

exports.imgLoad = function (req, res, next){
    var query = req.params.search;
    var page = req.query.offset;
    var clientId = imgur.clientId;
    var searchUrl = 'https://api.imgur.com/3/gallery/search/time/'+page+'?q='+query;
    var options = {
        url:searchUrl,
        headers:{
            "Authorization":"Client-ID "+clientId
        }
    };
    function callback(error, response, body) {
        if (!error && response.statusCode == 200) {
            var info = JSON.parse(body);
            req.imgurRaw = info;
            next();
        }
    }
    request (options, callback);
    };
    
    
exports.searchProcess = function(req,res,next){
    var searchJSON = req.imgurRaw
    
    
    
    
    
}

